<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="mastraãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨TypeScriptã§ã€Grok-2ã‚„Gemini 2.5 Proã‚’ä½¿ã£ãŸLLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã›ã‚“ã‹ï¼Ÿã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰thinkãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ã€ã•ã‚‰ã«AIè‡ªèº«ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã•ã›ã‚‹ãƒ«ãƒ¼ãƒ—å‡¦ç†ã¾ã§ã€å…·ä½“çš„ãªæ‰‹é †ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ï¼"><title>mastraã§LLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªç”±è‡ªåœ¨ï¼Grok-2ã¨thinkãƒ„ãƒ¼ãƒ«ã€æ–‡ç« ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã¾ã§</title><link rel=canonical href=https://takoyakisoft.com/p/build-llm-workflow-with-mastra/><link rel=stylesheet href=/scss/style.min.e2eb4d863e5f9e2d94c38679d645929c395fbab1ed23bbebd5526b205d5c473b.css><meta property='og:title' content="mastraã§LLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªç”±è‡ªåœ¨ï¼Grok-2ã¨thinkãƒ„ãƒ¼ãƒ«ã€æ–‡ç« ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã¾ã§"><meta property='og:description' content="mastraãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨TypeScriptã§ã€Grok-2ã‚„Gemini 2.5 Proã‚’ä½¿ã£ãŸLLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã›ã‚“ã‹ï¼Ÿã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰thinkãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ã€ã•ã‚‰ã«AIè‡ªèº«ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã•ã›ã‚‹ãƒ«ãƒ¼ãƒ—å‡¦ç†ã¾ã§ã€å…·ä½“çš„ãªæ‰‹é †ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ï¼"><meta property='og:url' content='https://takoyakisoft.com/p/build-llm-workflow-with-mastra/'><meta property='og:site_name' content='TakoyakiSoft'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='mastra'><meta property='article:tag' content='TypeScript'><meta property='article:tag' content='Grok'><meta property='article:tag' content='Gemini'><meta property='article:published_time' content='2025-04-03T21:00:34+09:00'><meta property='article:modified_time' content='2025-04-03T21:00:34+09:00'><meta property='og:image' content='https://takoyakisoft.com/p/build-llm-workflow-with-mastra/build-llm-workflow-with-mastra.webp'><meta name=twitter:site content="@takoyakisoft"><meta name=twitter:creator content="@takoyakisoft"><meta name=twitter:title content="mastraã§LLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªç”±è‡ªåœ¨ï¼Grok-2ã¨thinkãƒ„ãƒ¼ãƒ«ã€æ–‡ç« ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã¾ã§"><meta name=twitter:description content="mastraãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨TypeScriptã§ã€Grok-2ã‚„Gemini 2.5 Proã‚’ä½¿ã£ãŸLLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã›ã‚“ã‹ï¼Ÿã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰thinkãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ã€ã•ã‚‰ã«AIè‡ªèº«ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã•ã›ã‚‹ãƒ«ãƒ¼ãƒ—å‡¦ç†ã¾ã§ã€å…·ä½“çš„ãªæ‰‹é †ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ï¼"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://takoyakisoft.com/p/build-llm-workflow-with-mastra/build-llm-workflow-with-mastra.webp'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ããƒ»é–‰ã˜ã‚‹>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_f78e84f1474a9757.webp width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ•¹ï¸</span></figure><div class=site-meta><h1 class=site-name><a href=/>TakoyakiSoft</a></h1><h2 class=site-description>æ§˜ã€…ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ä½¿ã„æ–¹ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ã€‚</h2></div></header><ol class=menu-social><li><a href=https://bsky.app/profile/takoyakisoft.bsky.social target=_blank title=Bluesky rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bluesky"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6.335 5.144C4.681 3.945 2 3.017 2 5.97c0 .59.35 4.953.556 5.661C3.269 14.094 5.686 14.381 8 14c-4.045.665-4.889 3.208-2.667 5.41C6.363 20.428 7.246 21 8 21c2 0 3.134-2.769 3.5-3.5.333-.667.5-1.167.5-1.5.0.333.167.833.5 1.5.366.731 1.5 3.5 3.5 3.5.754.0 1.637-.571 2.667-1.59C20.889 17.207 20.045 14.664 16 14c2.314.38 4.73.094 5.444-2.369.206-.708.556-5.072.556-5.661.0-2.953-2.68-2.025-4.335-.826C15.372 6.806 12.905 10.192 12 12c-.905-1.808-3.372-5.194-5.665-6.856z"/></svg></a></li><li><a href=https://github.com/takoyakisoft target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/takoyakisoft target=_blank title=X rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li><li><a href=https://www.youtube.com/@takoyaki-soft target=_blank title=YouTube rel=me><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M2 8a4 4 0 014-4h12a4 4 0 014 4v8a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/><path d="M10 9l5 3-5 3z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ãƒ›ãƒ¼ãƒ </span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æ¤œç´¢</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>SNSã®ãƒªãƒ³ã‚¯</span></a></li><li><a href=/about/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-user-exclamation"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h4c.348.0.686.045 1.008.128"/><path d="M19 16v3"/><path d="M19 22v.01"/></svg>
<span>ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</span></a></li><li><a href=/terms-of-service/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-notes"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 3m0 2a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2H7a2 2 0 01-2-2z"/><path d="M9 7h6"/><path d="M9 11h6"/><path d="M9 15h4"/></svg>
<span>åˆ©ç”¨è¦ç´„</span></a></li><li><a href=/privacy-policy/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-shield-lock"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3a12 12 0 008.5 3A12 12 0 0112 21 12 12 0 013.5 6 12 12 0 0012 3"/><path d="M12 11m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 12v2.5"/></svg>
<span>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</span></a></li><li><a href=/disclaimer/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-exclamation-circle"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1018 0A9 9 0 103 12"/><path d="M12 9v4"/><path d="M12 16v.01"/></svg>
<span>å…è²¬äº‹é …</span></a></li><li><a href=/contact/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg>
<span>ãŠå•ã„åˆã‚ã›</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://takoyakisoft.com/en/>English</option><option value=https://takoyakisoft.com/ selected>æ—¥æœ¬èª</option><option value=https://takoyakisoft.com/zh-cn/>ç®€ä½“ä¸­æ–‡</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®æ¬¡</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#mastraã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>mastraã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li><li><a href=#è¨­å®šã‚’è¦‹ã¦ã¿ã‚ˆã†>è¨­å®šã‚’è¦‹ã¦ã¿ã‚ˆã†</a></li><li><a href=#å‹•ä½œç¢ºèªã—ã¦ã¿ã‚ˆã†>å‹•ä½œç¢ºèªã—ã¦ã¿ã‚ˆã†</a></li><li><a href=#thinkãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹>ã€Œthinkãƒ„ãƒ¼ãƒ«ã€ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹</a></li><li><a href=#thinkãƒ„ãƒ¼ãƒ«ã®å‹•ä½œç¢ºèª>thinkãƒ„ãƒ¼ãƒ«ã®å‹•ä½œç¢ºèª</a></li><li><a href=#æ–‡ç« ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹>æ–‡ç« ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹</a><ol><li><a href=#ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ç›®æŒ‡ã™ã“ã¨aiã«è‡ªåˆ†ã®æ–‡ä½“ã‚’å­¦ç¿’ã•ã›ã‚‹>ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ç›®æŒ‡ã™ã“ã¨ï¼šAIã«ã€Œè‡ªåˆ†ã®æ–‡ä½“ã€ã‚’å­¦ç¿’ã•ã›ã‚‹</a></li><li><a href=#æº–å‚™è©•ä¾¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç™»éŒ²>æº–å‚™ï¼šè©•ä¾¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç™»éŒ²</a></li><li><a href=#aiãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã—ã¦ã„ãä»•çµ„ã¿å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’è§£èª¬>AIãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã—ã¦ã„ãä»•çµ„ã¿ï¼šå‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’è§£èª¬</a></li><li><a href=#å‹•ã‹ã—ã¦ã¿ã‚ˆã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œæ‰‹é †>å‹•ã‹ã—ã¦ã¿ã‚ˆã†ï¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œæ‰‹é †</a></li><li><a href=#ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰</a></li><li><a href=#å®Œæˆãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãã®æ´»ç”¨æ³•>å®Œæˆï¼ã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã¨ãã®æ´»ç”¨æ³•</a></li><li><a href=#ã¾ã¨ã‚>ã¾ã¨ã‚</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/build-llm-workflow-with-mastra/><img src=/p/build-llm-workflow-with-mastra/build-llm-workflow-with-mastra_hu_d1208c176298e21f.webp srcset="/p/build-llm-workflow-with-mastra/build-llm-workflow-with-mastra_hu_d1208c176298e21f.webp 800w, /p/build-llm-workflow-with-mastra/build-llm-workflow-with-mastra_hu_e2dcb93dee202248.webp 1600w" width=800 height=411 loading=lazy alt="Featured image of post mastraã§LLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªç”±è‡ªåœ¨ï¼Grok-2ã¨thinkãƒ„ãƒ¼ãƒ«ã€æ–‡ç« ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã¾ã§"></a></div><div class=article-details><header class=article-category><a href=/categories/ai/>AI
</a><a href=/categories/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/build-llm-workflow-with-mastra/>mastraã§LLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªç”±è‡ªåœ¨ï¼Grok-2ã¨thinkãƒ„ãƒ¼ãƒ«ã€æ–‡ç« ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã¾ã§</a></h2><h3 class=article-subtitle>mastraãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨TypeScriptã§ã€Grok-2ã‚„Gemini 2.5 Proã‚’ä½¿ã£ãŸLLMãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã—ã¾ã›ã‚“ã‹ï¼Ÿã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‹ã‚‰thinkãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ã€ã•ã‚‰ã«AIè‡ªèº«ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã•ã›ã‚‹ãƒ«ãƒ¼ãƒ—å‡¦ç†ã¾ã§ã€å…·ä½“çš„ãªæ‰‹é †ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™ï¼</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025å¹´04æœˆ03æ—¥</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>èª­äº†æ™‚é–“: 19åˆ†</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://takoyakisoft.com/en/p/build-llm-workflow-with-mastra/ class=link>English</a>
<a href=https://takoyakisoft.com/zh-cn/p/build-llm-workflow-with-mastra/ class=link>ç®€ä½“ä¸­æ–‡</a></div></footer></div></header><section class=article-content><p>ã“ã‚“ã«ã¡ã¯ï¼ä»Šå›ã¯ã€mastraã£ã¦ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã€Grok-2ã¨Gemini 2.5 Pro expãªã©ã®LLMã‚’å‹•ã‹ã—ã¦ã¿ãŸãŠè©±ã§ã™ã€‚</p><p>mastraã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½¿ã†LLMã‚’æ±ºã‚ã¦ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ã‚’ä½œã£ã¦ã€ãã‚Œã‚‰ã‚’ã©ã†ã„ã†é †ç•ªã§å‹•ã‹ã™ã‹ã®ã€Œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ã‚’çµ„ã‚ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚TypeScriptã§æ›¸ã‘ã‚‹ã£ã¦ã„ã†ã®ãŒå€‹äººçš„ã«ã¯å¬‰ã—ã„ãƒã‚¤ãƒ³ãƒˆã§ã€ã“ã‚Œãªã‚‰Cloudflare Workersã¨ã‹Denoã¿ãŸã„ãªç’°å¢ƒã§ã€å®‰ä¾¡ã«Webã‚µãƒ¼ãƒ“ã‚¹ã«çµ„ã¿è¾¼ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãªã¨æ€ã£ã¦ã¾ã™ã€‚</p><p>ä¼¼ãŸã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã¨LangChainã¨ã‹æœ‰åã§ã™ã‘ã©ã€mastraã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã—ã‚„ã™ã•ã§ã¡ã‚‡ã£ã¨æœ‰åˆ©ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚ã‚ã¨ã€ä»¥å‰è©¦ã—ãŸDifyã£ã¦ã„ã†ãƒ„ãƒ¼ãƒ«ãŒã€ç¹°ã‚Šè¿”ã—å‡¦ç†ï¼ˆãƒ«ãƒ¼ãƒ—ï¼‰ãŒå°‘ã—è‹¦æ‰‹ãªæ„Ÿã˜ã ã£ãŸã®ã§ã€mastraãªã‚‰ã©ã†ã‹ãªï¼Ÿã¨æ€ã£ã¦è©¦ã—ã¦ã¿ãŸã€ã¨ã„ã†èƒŒæ™¯ã‚‚ã‚ã‚Šã¾ã™ã€‚</p><p>ã§ã¯ã€ã•ã£ããè©¦ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼</p><h2 id=mastraã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>mastraã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p>ä»Šå›ã¯Windows 11ã§ã€AIã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®ã€ŒTraeã€ã¨ã€é«˜é€Ÿãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€Œpnpmã€ã‚’ä½¿ã£ã¦ã¿ã¾ã™ã€‚</p><p>ã¾ãšã¯ã€mastraã®å…¬å¼ã‚µã‚¤ãƒˆã«ã‚ã‚‹æ‰‹é †ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚
ï¼ˆå‚è€ƒ: <a class=link href=https://mastra.ai/docs/getting-started/installation#create-a-new-project target=_blank rel=noopener>Create a New Project</a>ï¼‰</p><p>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>pnpm create mastra@latest
</span></span></code></pre></td></tr></table></div></div><p>ã„ãã¤ã‹è³ªå•ã•ã‚Œã‚‹ã®ã§ã€ç­”ãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/WindowsTerminal_UXtTR1rp9W.webp width=1127 height=1032 srcset="/p/build-llm-workflow-with-mastra/WindowsTerminal_UXtTR1rp9W_hu_e5736a7229396e4d.webp 480w, /p/build-llm-workflow-with-mastra/WindowsTerminal_UXtTR1rp9W_hu_7e216cf636dd59ff.webp 1024w" loading=lazy alt=mastraãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆç”»é¢ class=gallery-image data-flex-grow=109 data-flex-basis=262px></p><p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’èã‹ã‚Œã¾ã™ã€‚ä»Šå›ã¯<code>my-mastra-app</code>ã«ã—ã¾ã—ãŸã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—‡  What do you want to name your project?
</span></span><span class=line><span class=cl>â”‚  my-mastra-app
</span></span></code></pre></td></tr></table></div></div><p>ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãå ´æ‰€ã§ã™ã­ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®<code>src/</code>ã§OKã§ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—†  Where should we create the Mastra files? (default: src/)
</span></span><span class=line><span class=cl>â”‚  src/
</span></span></code></pre></td></tr></table></div></div><p>å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é¸ã³ã¾ã™ã€‚Agentsï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼‰ã€Workflowsï¼ˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰ã¨Toolsï¼ˆãƒ„ãƒ¼ãƒ«ï¼‰ã¯å¾Œã§ä½¿ã†ã®ã§ã€Yesã‚’é¸ã‚“ã§ãŠãã¾ã—ã‚‡ã†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—†  Choose components to install:
</span></span><span class=line><span class=cl>â”‚  â—¼ Agents
</span></span><span class=line><span class=cl>â”‚  â—¼ Workflows
</span></span><span class=line><span class=cl>â—‡  Add tools?
</span></span><span class=line><span class=cl>â”‚  Yes
</span></span></code></pre></td></tr></table></div></div><p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½¿ã†LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’é¸ã³ã¾ã™ã€‚ä»Šå›ã¯Googleã‚’é¸ã‚“ã§ã¿ã¾ã—ãŸãŒã€ã“ã‚Œã¯å¾Œã§è‡ªç”±ã«å¤‰æ›´ã§ãã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—‡  Select default provider:
</span></span><span class=line><span class=cl>â”‚  Google
</span></span></code></pre></td></tr></table></div></div><p>APIã‚­ãƒ¼ã®è¨­å®šã§ã™ã€‚ã‚ã¨ã§<code>.env.development</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®šã™ã‚‹ã®ã§ã€ã“ã“ã§ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼ˆSkip for nowï¼‰ã§å¤§ä¸ˆå¤«ã§ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—†  Enter your google API key?
</span></span><span class=line><span class=cl>â”‚  â— Skip for now (default)
</span></span></code></pre></td></tr></table></div></div><p>ã‚µãƒ³ãƒ—ãƒ«ã®è¿½åŠ ã¯ã€ä»Šå›ã¯Yesã«ã—ã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—‡  Add example
</span></span><span class=line><span class=cl>â”‚  Yes
</span></span></code></pre></td></tr></table></div></div><p>AI IDEã¨ã®é€£æºã‚‚ã€ä»Šå›ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã—ãŸã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>â—‡  Make your AI IDE into a Mastra expert? (installs Mastra docs MCP server)
</span></span><span class=line><span class=cl>â”‚  Skip for now
</span></span></code></pre></td></tr></table></div></div><p>ã“ã‚Œã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é››å½¢ãŒã§ãã¾ã—ãŸï¼
ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã—ã¦ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl><span class=k>cd</span> my-mastra-app
</span></span><span class=line><span class=cl>pnpm i
</span></span></code></pre></td></tr></table></div></div><p>é–‹ç™ºç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚Ctrl+Cã§æ­¢ã‚ã‚‰ã‚Œã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>pnpm run dev
</span></span></code></pre></td></tr></table></div></div><h2 id=è¨­å®šã‚’è¦‹ã¦ã¿ã‚ˆã†>è¨­å®šã‚’è¦‹ã¦ã¿ã‚ˆã†</h2><p>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµ‚ã‚ã£ãŸã‚‰ã€ã„ãã¤ã‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã‹ã€‚</p><p><code>package.json</code>ã‚’è¦‹ã‚‹ã¨ã€<code>dependencies</code>ã«<code>@ai-sdk/google</code>ãŒå…¥ã£ã¦ã¾ã™ã­ã€‚ã“ã‚Œã¯Vercelç¤¾ãŒæä¾›ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€Geminiã ã‘ã˜ã‚ƒãªãã¦DeepSeekã‚„Grokã€OpenRouterã¿ãŸã„ãªä»–ã®LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã¿ãŸã„ã§ã™ã€‚ä¾¿åˆ©ãã†ã§ã™ã­ï¼
ï¼ˆå‚è€ƒ: <a class=link href=https://sdk.vercel.ai/providers/ai-sdk-providers target=_blank rel=noopener>AI SDK Providers</a>ï¼‰</p><p><code>scripts</code>ã«ã¯<code>dev</code>ã—ã‹ãªã„ã§ã™ã€‚ã“ã‚Œã¯ä»Šå¾Œã€ãƒ“ãƒ«ãƒ‰ã¨ã‹ãƒ†ã‚¹ãƒˆç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè¿½åŠ ã•ã‚Œã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;my-mastra-app&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;main&#34;</span><span class=p>:</span> <span class=s2>&#34;index.js&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;test&#34;</span><span class=p>:</span> <span class=s2>&#34;echo \&#34;Error: no test specified\&#34; &amp;&amp; exit 1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;dev&#34;</span><span class=p>:</span> <span class=s2>&#34;mastra dev&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;keywords&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;author&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;license&#34;</span><span class=p>:</span> <span class=s2>&#34;ISC&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;module&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;@ai-sdk/google&#34;</span><span class=p>:</span> <span class=s2>&#34;^1.2.5&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;@mastra/core&#34;</span><span class=p>:</span> <span class=s2>&#34;^0.7.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;mastra&#34;</span><span class=p>:</span> <span class=s2>&#34;^0.4.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;zod&#34;</span><span class=p>:</span> <span class=s2>&#34;^3.24.2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;devDependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;@types/node&#34;</span><span class=p>:</span> <span class=s2>&#34;^22.14.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;tsx&#34;</span><span class=p>:</span> <span class=s2>&#34;^4.19.3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;typescript&#34;</span><span class=p>:</span> <span class=s2>&#34;^5.8.2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä»Šå›ã¯xAIã®Grokã‚‚ä½¿ã„ãŸã„ã®ã§ã€å¯¾å¿œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã—ã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>pnpm add @ai-sdk/xai
</span></span></code></pre></td></tr></table></div></div><p>ã‚‚ã—ä¸è¦ã«ãªã£ãŸã‚‰ã€<code>pnpm remove @ai-sdk/xai</code>ã§æ¶ˆã›ã¾ã™ã€‚</p><p>æ¬¡ã«APIã‚­ãƒ¼ã®è¨­å®šã§ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«<code>.env.development</code>ã¨<code>.env</code>ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã€ãã‚Œãã‚Œã®APIã‚­ãƒ¼ã‚’è¨˜è¿°ã—ã¾ã™ã€‚ï¼ˆ<code>.env</code>ã¯æœ¬ç•ªç”¨ã€<code>.env.development</code>ã¯é–‹ç™ºç”¨ã§ã™ï¼‰</p><p><code>.env.development</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-env data-lang=env><span class=line><span class=cl><span class=nv>GOOGLE_GENERATIVE_AI_API_KEY</span><span class=o>=</span>your-google-api-key
</span></span><span class=line><span class=cl><span class=nv>XAI_API_KEY</span><span class=o>=</span>your-xai-api-key
</span></span></code></pre></td></tr></table></div></div><p>LLMã®ãƒ¢ãƒ‡ãƒ«ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®šç¾©ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹ãˆã° <code>src/mastra/agents/index.ts</code>ï¼‰ã¨ã‹ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹ãˆã° <code>src/mastra/workflows/index.ts</code>ï¼‰ã§æŒ‡å®šã—ã¾ã™ã€‚</p><p>ä¾‹ãˆã°ã€Grok-2ã‚’ä½¿ã†å ´åˆã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚</p><p><code>src/mastra/agents/index.ts</code> ã®ä¾‹:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>xai</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@ai-sdk/xai&#39;</span><span class=p>;</span> <span class=c1>// xAIã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>Agent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/agent&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>weatherTool</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;../tools&#39;</span><span class=p>;</span> <span class=c1>// ä½¿ã†ãƒ„ãƒ¼ãƒ«ã‚‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>weatherAgent</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Agent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Weather Agent&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>instructions</span><span class=o>:</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>      You are a helpful weather assistant that provides accurate weather information.
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      Your primary function is to help users get weather details for specific locations. When responding:
</span></span></span><span class=line><span class=cl><span class=sb>      - Always ask for a location if none is provided
</span></span></span><span class=line><span class=cl><span class=sb>      - If the location name isnâ€™t in English, please translate it
</span></span></span><span class=line><span class=cl><span class=sb>      - If giving a location with multiple parts (e.g. &#34;New York, NY&#34;), use the most relevant part (e.g. &#34;New York&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>      - Include relevant details like humidity, wind conditions, and precipitation
</span></span></span><span class=line><span class=cl><span class=sb>      - Keep responses concise but informative
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      Use the weatherTool to fetch current weather data.
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>model</span>: <span class=kt>xai</span><span class=p>(</span><span class=s1>&#39;grok-2-latest&#39;</span><span class=p>),</span> <span class=c1>// ã“ã“ã§ãƒ¢ãƒ‡ãƒ«ã‚’æŒ‡å®šï¼
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>tools</span><span class=o>:</span> <span class=p>{</span> <span class=nx>weatherTool</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…ã§ã‚‚åŒæ§˜ã«æŒ‡å®šã§ãã¾ã™ã€‚</p><p><code>src/mastra/workflows/index.ts</code> ã®ä¾‹:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>xai</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@ai-sdk/xai&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Agent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/agent&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Step</span><span class=p>,</span> <span class=nx>Workflow</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/workflows&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>z</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;zod&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>llm</span> <span class=o>=</span> <span class=nx>xai</span><span class=p>(</span><span class=s1>&#39;grok-2-latest&#39;</span><span class=p>);</span> <span class=c1>// ã“ã“ã§ä½¿ã†ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©
</span></span></span></code></pre></td></tr></table></div></div><h2 id=å‹•ä½œç¢ºèªã—ã¦ã¿ã‚ˆã†>å‹•ä½œç¢ºèªã—ã¦ã¿ã‚ˆã†</h2><p>è¨­å®šãŒã§ããŸã‚‰ã€ã‚‚ã†ä¸€åº¦é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>pnpm run dev
</span></span></code></pre></td></tr></table></div></div><p>ãƒ–ãƒ©ã‚¦ã‚¶ã§ <a class=link href=http://localhost:4111/ target=_blank rel=noopener>http://localhost:4111/</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€mastraã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/Trae_DllHdtTB78.webp width=1920 height=1032 srcset="/p/build-llm-workflow-with-mastra/Trae_DllHdtTB78_hu_523f3c38bccd80b5.webp 480w, /p/build-llm-workflow-with-mastra/Trae_DllHdtTB78_hu_b6bd473c52d66d37.webp 1024w" loading=lazy alt=weatherã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé¸æŠç”»é¢ class=gallery-image data-flex-grow=186 data-flex-basis=446px></p><p>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é¸ã‚“ã§ã€ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§è©¦ã›ã¾ã™ã­ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/Trae_8z5OEtWoym.webp width=1920 height=1032 srcset="/p/build-llm-workflow-with-mastra/Trae_8z5OEtWoym_hu_67c7256000ecd96a.webp 480w, /p/build-llm-workflow-with-mastra/Trae_8z5OEtWoym_hu_28642c119fbb0cc5.webp 1024w" loading=lazy alt=weatherã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒ£ãƒƒãƒˆç”»é¢ class=gallery-image data-flex-grow=186 data-flex-basis=446px></p><p>Grok-2ã‚’ä½¿ã†ã¨ã€ç­”ãˆãŒè‹±èªã§è¿”ã£ã¦ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p><h2 id=thinkãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹>ã€Œthinkãƒ„ãƒ¼ãƒ«ã€ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹</h2><p>æ¬¡ã«ã€ã¡ã‚‡ã£ã¨é¢ç™½ã„ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚ã€Œthinkãƒ„ãƒ¼ãƒ«ã€ã£ã¦ã„ã†ã‚‚ã®ã§ã™ã€‚</p><p>ã“ã‚Œã¯ã€Anthropicã®è¨˜äº‹ã§ç´¹ä»‹ã•ã‚Œã¦ã„ãŸãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã§ã€LLMã«ä½•ã‹ã‚’å®Ÿè¡Œã•ã›ã‚‹å‰ã«ã€Œè€ƒãˆã•ã›ã‚‹ã€ã‚¹ãƒ†ãƒƒãƒ—ã‚’å…¥ã‚Œã‚‹ã¨æ€§èƒ½ãŒä¸ŠãŒã‚‹ã€ã¨ã„ã†ã‚‚ã®ã‚‰ã—ã„ã§ã™ã€‚
ï¼ˆå‚è€ƒ: <a class=link href=https://www.anthropic.com/engineering/claude-think-tool target=_blank rel=noopener>The &ldquo;think&rdquo; tool: Enabling Claude to stop and think in complex tool use situations</a>ï¼‰</p><p>ã“ã®ãƒ„ãƒ¼ãƒ«è‡ªä½“ã¯ã€ç‰¹ã«ä½•ã‹å¤–éƒ¨ã®æƒ…å ±ã‚’æŒã£ã¦ããŸã‚Šã™ã‚‹ã‚ã‘ã§ã¯ãªãã¦ã€ãŸã ã€Œè€ƒãˆã‚‹ã€ã¨ã„ã†ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ¨¡å€£ã•ã›ã‚‹ã ã‘ãªã‚“ã§ã™ã€‚ã§ã‚‚ã€ã“ã‚Œã§è¤‡é›‘ãªæ¨è«–ã¨ã‹ãŒå¿…è¦ãªå ´åˆã«åŠ¹æœãŒã‚ã‚‹ã¿ãŸã„ã§ã™ã€‚é¢ç™½ã„ã§ã™ã‚ˆã­ï¼</p><p>ã§ã¯ã€mastraã§thinkãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><p>ã¾ãšã€ãƒ„ãƒ¼ãƒ«ã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šã¾ã™ã€‚</p><p><code>src/mastra/tools/thinkTool.ts</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createTool</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/tools&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>z</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;zod&#39;</span><span class=p>;</span> <span class=c1>// å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>thinkTool</span> <span class=o>=</span> <span class=nx>createTool</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;think&#39;</span><span class=p>,</span> <span class=c1>// ãƒ„ãƒ¼ãƒ«ã®ID
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;Use the tool to think about something. It will not obtain new information or change the database, but just append the thought to the log. Use it when complex reasoning or some cache memory is needed.&#39;</span><span class=p>,</span> <span class=c1>// ãƒ„ãƒ¼ãƒ«ã®èª¬æ˜
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>inputSchema</span>: <span class=kt>z.object</span><span class=p>({</span> <span class=c1>// ãƒ„ãƒ¼ãƒ«ãŒå—ã‘å–ã‚‹å…¥åŠ›ã®å®šç¾©
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>thought</span>: <span class=kt>z.string</span><span class=p>().</span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;A thought to think about.&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>outputSchema</span>: <span class=kt>z.object</span><span class=p>({}),</span> <span class=c1>// ãƒ„ãƒ¼ãƒ«ãŒå‡ºåŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å®šç¾© (ä»Šå›ã¯ç©º)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>execute</span>: <span class=kt>async</span> <span class=p>({</span> <span class=nx>context</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®Ÿéš›ã®å‡¦ç†ã¯ä½•ã‚‚ã—ãªã„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Thinking:&#39;</span><span class=p>,</span> <span class=nx>context</span><span class=p>.</span><span class=nx>thought</span><span class=p>);</span> <span class=c1>// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«æ€è€ƒå†…å®¹ã‚’å‡ºã™ãã‚‰ã„ã¯ã—ã¦ã‚‚ã„ã„ã‹ã‚‚
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¬¡ã«ã€ã“ã®thinkãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã€ã„ã¤thinkãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã¹ãã‹ã‚’æŒ‡ç¤ºã™ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã­ã€‚</p><p><code>src/mastra/agents/thinkAgent.ts</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Agent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/agent&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>thinkTool</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;../tools/thinkTool&#39;</span><span class=p>;</span> <span class=c1>// ä½œæˆã—ãŸthinkToolã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>xai</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@ai-sdk/xai&#39;</span><span class=p>;</span> <span class=c1>// ä½¿ã†LLMãƒ¢ãƒ‡ãƒ«ã‚‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>thinkAgent</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Agent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Think Agent&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>instructions</span><span class=o>:</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>    ## Using the think tool
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>    Before taking any action or responding to the user after receiving tool results, use the think tool as a scratchpad to:
</span></span></span><span class=line><span class=cl><span class=sb>    - List the specific rules that apply to the current request
</span></span></span><span class=line><span class=cl><span class=sb>    - Check if all required information is collected
</span></span></span><span class=line><span class=cl><span class=sb>    - Verify that the planned action complies with all policies
</span></span></span><span class=line><span class=cl><span class=sb>    - Iterate over tool results for correctness 
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>    Here are some examples of what to iterate over inside the think tool:
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;think_tool_example_1&gt;
</span></span></span><span class=line><span class=cl><span class=sb>    User wants to [specific scenario]
</span></span></span><span class=line><span class=cl><span class=sb>    - Need to verify: [key information]
</span></span></span><span class=line><span class=cl><span class=sb>    - Check relevant rules: [list rules]
</span></span></span><span class=line><span class=cl><span class=sb>    - Verify [important conditions]
</span></span></span><span class=line><span class=cl><span class=sb>    - Plan: [outline steps]
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;/think_tool_example_1&gt;
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>    ## Think in English and answer in Japanese
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>,</span> <span class=c1>// æ—¥æœ¬èªã§ç­”ãˆã¦ã‚‚ã‚‰ã†ã‚ˆã†ã«æŒ‡ç¤ºã‚’è¿½åŠ ï¼
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>model</span>: <span class=kt>xai</span><span class=p>(</span><span class=s1>&#39;grok-2-latest&#39;</span><span class=p>),</span> <span class=c1>// ã“ã“ã‚‚Grok-2ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>tools</span><span class=o>:</span> <span class=p>{</span> <span class=nx>thinkTool</span> <span class=p>}</span> <span class=c1>// ã“ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½¿ã†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ç™»éŒ²
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€å¾Œã«ã€ä½œæˆã—ãŸãƒ„ãƒ¼ãƒ«ã¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’mastraã«ç™»éŒ²ã—ã¾ã™ã€‚</p><p><code>src/mastra/index.ts</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Mastra</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/mastra&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createLogger</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/logger&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>weatherWorkflow</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./workflows&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>weatherAgent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./agents&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>thinkAgent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./agents/thinkAgent&#39;</span><span class=p>;</span> <span class=c1>// ä½œæˆã—ãŸthinkAgentã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>mastra</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Mastra</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>workflows</span><span class=o>:</span> <span class=p>{</span> <span class=nx>weatherWorkflow</span> <span class=p>},</span> <span class=c1>// æ—¢å­˜ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>agents</span><span class=o>:</span> <span class=p>{</span> <span class=nx>weatherAgent</span><span class=p>,</span> <span class=nx>thinkAgent</span> <span class=p>},</span> <span class=c1>// ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¿½åŠ 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>logger</span>: <span class=kt>createLogger</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Mastra&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>level</span><span class=o>:</span> <span class=s1>&#39;info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>ã“ã‚Œã§thinkãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…ã¯å®Œäº†ã§ã™ï¼</p><h2 id=thinkãƒ„ãƒ¼ãƒ«ã®å‹•ä½œç¢ºèª>thinkãƒ„ãƒ¼ãƒ«ã®å‹•ä½œç¢ºèª</h2><p>å†åº¦ã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>pnpm run dev
</span></span></code></pre></td></tr></table></div></div><p><a class=link href=http://localhost:4111/ target=_blank rel=noopener>http://localhost:4111/</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ä»Šåº¦ã¯ã€ŒThink Agentã€ã‚’é¸ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/Trae_rklEm6XM9m.webp width=1920 height=1032 srcset="/p/build-llm-workflow-with-mastra/Trae_rklEm6XM9m_hu_942fbf387f6e2674.webp 480w, /p/build-llm-workflow-with-mastra/Trae_rklEm6XM9m_hu_9f44214b9918d7a4.webp 1024w" loading=lazy alt=thinkã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé¸æŠç”»é¢ class=gallery-image data-flex-grow=186 data-flex-basis=446px></p><p>ä½•ã‹æŒ‡ç¤ºã‚’å‡ºã™ã¨ã€è£å´ã§thinkãƒ„ãƒ¼ãƒ«ãŒå‹•ã„ã¦ã€ãã®å¾Œã«å¿œç­”ã—ã¦ãã‚Œã‚‹ã¯ãšã§ã™ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/Trae_kSY1rEClJW.webp width=1920 height=1032 srcset="/p/build-llm-workflow-with-mastra/Trae_kSY1rEClJW_hu_f16017b4d425c115.webp 480w, /p/build-llm-workflow-with-mastra/Trae_kSY1rEClJW_hu_215aa6865a0bf9ed.webp 1024w" loading=lazy alt=thinkã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒ£ãƒƒãƒˆç”»é¢ class=gallery-image data-flex-grow=186 data-flex-basis=446px></p><p>ã“ã‚Œã§ã€å°‘ã—è¤‡é›‘ãªã“ã¨ã§ã‚‚ã€ã‚ˆã‚Šæ­£ç¢ºã«è€ƒãˆã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼</p><h2 id=æ–‡ç« ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹>æ–‡ç« ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã¿ã‚‹</h2><p>ã•ã¦ã€ã“ã“ã‹ã‚‰ã¯mastraã®ãƒ«ãƒ¼ãƒ—æ©Ÿèƒ½ã¨è©•ä¾¡æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ãŸã€ã¡ã‚‡ã£ã¨å¿œç”¨çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p><h3 id=ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ç›®æŒ‡ã™ã“ã¨aiã«è‡ªåˆ†ã®æ–‡ä½“ã‚’å­¦ç¿’ã•ã›ã‚‹>ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ç›®æŒ‡ã™ã“ã¨ï¼šAIã«ã€Œè‡ªåˆ†ã®æ–‡ä½“ã€ã‚’å­¦ç¿’ã•ã›ã‚‹</h3><p>ãƒ†ãƒ¼ãƒã¯ã€Œä¸ãˆã‚‰ã‚ŒãŸæ–‡ç« ã®æ›¸ãæ–¹ã‚’çœŸä¼¼ã™ã‚‹AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã€AIè‡ªèº«ã«ä½œã‚‰ã›ã‚‹ã€ã§ã™ã€‚ãªã‚“ã ã‹AIã«AIã®ä½¿ã„æ–¹ã‚’è€ƒãˆã•ã›ã‚‹ã¿ãŸã„ã§ã€é¢ç™½ã„è©¦ã¿ã ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿ</p><p>æœ€è¿‘ã€ã€ŒAIãŒæ›¸ã„ãŸæ–‡ç« ã‹ã€äººé–“ãŒæ›¸ã„ãŸæ–‡ç« ã‹ã€è¦‹åˆ†ã‘ãŒã¤ã‹ãªã„ï¼ã€ãªã‚“ã¦è©±ã‚‚ã‚ˆãèãã¾ã™ã‚ˆã­ã€‚ãã‚Œãªã‚‰ã€ã„ã£ãè‡ªåˆ†ã®æ–‡ç« ã®ã‚¯ã‚»ã‚’AIã«å­¦ç¿’ã•ã›ã¦ã€ãƒ–ãƒ­ã‚°è¨˜äº‹ã®ä¸‹æ›¸ãã¨ã‹ã‚’ä½œã£ã¦ã‚‚ã‚‰ãˆãŸã‚‰ã€ã‚¿ã‚¤ãƒ”ãƒ³ã‚°é‡ãŒæ¸›ã£ã¦æ¥½ã«ãªã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ï¼Ÿã¨æ€ã£ãŸã®ãŒã€ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œã£ã¦ã¿ãŸãã£ã‹ã‘ã§ã™ã€‚</p><h3 id=æº–å‚™è©•ä¾¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç™»éŒ²>æº–å‚™ï¼šè©•ä¾¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç™»éŒ²</h3><p><strong>ã¾ãšã¯æº–å‚™ï¼šè©•ä¾¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ </strong></p><p>ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã¯ã€ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è‰¯ã—æ‚ªã—ã‚’åˆ¥ã®AIã«è©•ä¾¡ã•ã›ã‚‹ãŸã‚ã«ã€mastraã®è©•ä¾¡ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„ã¾ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-batch data-lang=batch><span class=line><span class=cl>pnpm add @mastra/evals
</span></span></code></pre></td></tr></table></div></div><p><strong>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’mastraã«ç™»éŒ²</strong></p><p>æ¬¡ã«ã€ã“ã‚Œã‹ã‚‰ä½œæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ (<code>clonePromptGeneratorWorkflow</code>) ã‚’mastraæœ¬ä½“ã«èªè­˜ã•ã›ã‚‹ãŸã‚ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (<code>src/mastra/index.ts</code>) ã‚’æ›´æ–°ã—ã¾ã™ã€‚</p><p><code>src/mastra/index.ts</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Mastra</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/mastra&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createLogger</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/logger&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>weatherWorkflow</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./workflows&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// â†“ æ–°ã—ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>clonePromptGeneratorWorkflow</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./workflows/clonePromptGeneratorWorkflow&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>weatherAgent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./agents&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>thinkAgent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./agents/thinkAgent&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>mastra</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Mastra</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// â†“ workflowsã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ–°ã—ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è¿½åŠ 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>workflows</span><span class=o>:</span> <span class=p>{</span> <span class=nx>weatherWorkflow</span><span class=p>,</span> <span class=nx>clonePromptGeneratorWorkflow</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>agents</span><span class=o>:</span> <span class=p>{</span> <span class=nx>weatherAgent</span><span class=p>,</span> <span class=nx>thinkAgent</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>logger</span>: <span class=kt>createLogger</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Mastra&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>level</span><span class=o>:</span> <span class=s1>&#39;info&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p>ã“ã‚Œã§æº–å‚™OKã§ã™ï¼</p><h3 id=aiãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã—ã¦ã„ãä»•çµ„ã¿å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’è§£èª¬>AIãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã—ã¦ã„ãä»•çµ„ã¿ï¼šå‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’è§£èª¬</h3><p>ã§ã¯ã€å®Ÿéš›ã«ã©ã‚“ãªæµã‚Œã§AIãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆãƒ»æ”¹å–„ã—ã¦ã„ãã®ã‹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p><ol><li><p>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆAI (Prompt Creator Agent):
ã¾ãšã€ã‚ãªãŸãŒç”¨æ„ã—ãŸã€ŒãŠæ‰‹æœ¬ã€ã¨ãªã‚‹æ–‡ç« ï¼ˆ<code>originalText</code>ï¼‰ã‚’åˆ†æã•ã›ã¾ã™ã€‚ãã—ã¦ã€ãã®æ–‡ç« ã®æ›¸ãæ‰‹ã®ç‰¹å¾´ï¼ˆäººæ ¼ã€æ–‡ä½“ã€å£ç™–ãªã©ï¼‰ã‚’æ‰ãˆã¦ã€ä»–ã®AIã«ã€Œã“ã®äººã«ãªã‚Šãã£ã¦æ–‡ç« ã‚’æ›¸ã„ã¦ã­ï¼ã€ã¨æŒ‡ç¤ºã™ã‚‹ãŸã‚ã®ã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã®åˆç‰ˆã‚’ä½œæˆã—ã¾ã™ã€‚</p></li><li><p>ãƒ†ãƒ¼ãƒæŠ½å‡ºAI (Theme Abstractor Agent):
æ¬¡ã«ã€ãŠæ‰‹æœ¬æ–‡ç« ã‹ã‚‰å…·ä½“çš„ãªå›ºæœ‰åè©ï¼ˆmastraã€Grok-2ãªã©ï¼‰ã‚’å–ã‚Šé™¤ãã€ã€Œã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã‚’ä½¿ã£ã¦AIå‡¦ç†ã®æµã‚Œã‚’ä½œã‚‹æ‰‹é †ã€ã®ã‚ˆã†ãªã€ä¸€èˆ¬çš„ãªã€ŒæŠ½è±¡åŒ–ãƒ†ãƒ¼ãƒã€ã‚’æŠ½å‡ºã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ãªã‚Šãã‚Šå…·åˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹éš›ã«ã€ãŠæ‰‹æœ¬ã¨å…¨ãåŒã˜å†…å®¹ã«ãªã£ã¦ã—ã¾ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚</p></li><li><p>æ–‡ç« ç”ŸæˆAI (Text Generator Agent):
ã‚¹ãƒ†ãƒƒãƒ—1ã§ä½œã£ãŸã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã¨ã€ã‚¹ãƒ†ãƒƒãƒ—2ã§æŠ½å‡ºã—ãŸã€ŒæŠ½è±¡åŒ–ãƒ†ãƒ¼ãƒã€ã‚’ä½¿ã£ã¦ã€å®Ÿéš›ã«ãªã‚Šãã‚Šæ–‡ç« ã‚’ç”Ÿæˆã•ã›ã¾ã™ã€‚ã€Œã€æŠ½è±¡åŒ–ãƒ†ãƒ¼ãƒã€ã«ã¤ã„ã¦ã€ãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¾“ã£ã¦æ›¸ã„ã¦ã¿ã¦ã€ã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚</p></li><li><p>è©•ä¾¡AI (Authorship Similarity Judge/Metric):
ã„ã‚ˆã„ã‚ˆè©•ä¾¡ã§ã™ã€‚ãŠæ‰‹æœ¬æ–‡ç« ã¨ã€ã‚¹ãƒ†ãƒƒãƒ—3ã§AIãŒç”Ÿæˆã—ãŸãªã‚Šãã‚Šæ–‡ç« ã‚’æ¯”è¼ƒã•ã›ã€ã€Œæ›¸ãæ–¹ã®é¡ä¼¼åº¦ã€ã‚’0.0ï¼ˆå…¨ç„¶ä¼¼ã¦ãªã„ï¼‰ã‹ã‚‰1.0ï¼ˆç“œäºŒã¤ï¼ï¼‰ã®ã‚¹ã‚³ã‚¢ã§æ¡ç‚¹ã—ã¾ã™ã€‚å˜èªé¸ã³ã€æ–‡ã®é•·ã•ã€å£èª¿ã€å¥èª­ç‚¹ã®ä½¿ã„æ–¹ãªã©ã€ã‚ãã¾ã§ã€Œæ›¸ãæ–¹ã€ã ã‘ã‚’è¦‹ã¦ã€å†…å®¹ã®æ­£ã—ã•ã¯å•ã„ã¾ã›ã‚“ã€‚</p></li><li><p>ãƒ«ãƒ¼ãƒ—åˆ¤å®š & ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯:</p><ul><li>è©•ä¾¡ã‚¹ã‚³ã‚¢ãŒã€ã‚ã‚‰ã‹ã˜ã‚è¨­å®šã—ãŸé–¾å€¤ï¼ˆã‚³ãƒ¼ãƒ‰å†…ã§ã¯ <code>SIMILARITY_THRESHOLD = 0.7</code> ã¨ã—ã¦ã„ã¾ã™ï¼‰ã‚’è¶…ãˆã¦ã„ã‚Œã°ã€ã€Œåˆæ ¼ï¼ã€ã¨ã—ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯çµ‚äº†ã—ã€æˆåŠŸã—ãŸã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚</li><li>ã‚¹ã‚³ã‚¢ãŒé–¾å€¤ã«æº€ãŸãªã‘ã‚Œã°ã€ã€Œã‚‚ã£ã¨é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€ã¨ãªã‚Šã¾ã™ã€‚è©•ä¾¡AIãŒã€Œãªãœã‚¹ã‚³ã‚¢ãŒä½ã„ã®ã‹ï¼ˆä¾‹: ã‚‚ã£ã¨å¥èª­ç‚¹ã®ä½¿ã„æ–¹ãŒä¼¼ã¦ã„ãªã„ã€å£èª¿ãŒç¡¬ã™ãã‚‹ãªã©ï¼‰ã€ã‚’æŒ‡æ‘˜ã—ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ä½œæˆã—ã€ãã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æ·»ãˆã¦ã‚¹ãƒ†ãƒƒãƒ—1ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆAIã«ã€Œã“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å‚è€ƒã«ã€ã‚‚ã£ã¨è‰¯ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œã£ã¦ï¼ã€ã¨æŒ‡ç¤ºã‚’å‡ºã—ã€ãƒ«ãƒ¼ãƒ—ã—ã¾ã™ã€‚</li></ul></li></ol><p>ã“ã®ãƒ«ãƒ¼ãƒ—ã‚’ç¹°ã‚Šè¿”ã™ã“ã¨ã§ã€AIãŒè©¦è¡ŒéŒ¯èª¤ã—ãªãŒã‚‰ã€ã©ã‚“ã©ã‚“ãŠæ‰‹æœ¬ã®æ›¸ãæ–¹ã«è¿‘ã„æ–‡ç« ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ãªã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã¸ã¨æ”¹å–„ã—ã¦ã„ãã€ã¨ã„ã†ä»•çµ„ã¿ã§ã™ã€‚</p><p><strong>Tips:</strong></p><ul><li>ãƒ¢ãƒ‡ãƒ«é¸æŠ: ä»Šå›ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ <code>xai('grok-2-latest')</code> ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€ã‚‚ã—Google AI Studioãªã©ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãªã‚‰ <code>gemini('gemini-2.5-pro-exp-03-25')</code> ã®ã‚ˆã†ãªã€ã‚ˆã‚Šé«˜æ€§èƒ½ãªãƒ¢ãƒ‡ãƒ«ã‚’è©¦ã—ã¦ã¿ã‚‹ã¨ã€1å›ã®ãƒ«ãƒ¼ãƒ—ã§ã‹ãªã‚Šè‰¯ã„çµæœãŒå‡ºã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ å„Agentã‚„Metricã® <code>model: llm</code> ã®éƒ¨åˆ†ã‚’æ›¸ãæ›ãˆã¦ã¿ã¦ãã ã•ã„ã€‚</li><li>é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ã®é–¾å€¤: <code>SIMILARITY_THRESHOLD</code> ã®å€¤ (0.7) ã¯ã€ã©ã‚Œãã‚‰ã„å³ã—ãè©•ä¾¡ã™ã‚‹ã‹ã®åŸºæº–ã§ã™ã€‚ãªã‹ãªã‹ãƒ«ãƒ¼ãƒ—ãŒçµ‚ã‚ã‚‰ãªã„å ´åˆã¯å°‘ã—ä¸‹ã’ã¦ã¿ãŸã‚Šã€ã‚‚ã£ã¨ç²¾åº¦ã‚’é«˜ã‚ãŸã„å ´åˆã¯ä¸Šã’ã¦ã¿ãŸã‚Šã¨ã€æ‰‹å‹•ã§èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</li></ul><h3 id=å‹•ã‹ã—ã¦ã¿ã‚ˆã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œæ‰‹é †>å‹•ã‹ã—ã¦ã¿ã‚ˆã†ï¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œæ‰‹é †</h3><p>é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ (<code>pnpm run dev</code>) ã‚’èµ·å‹•ã—ãŸçŠ¶æ…‹ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ <a class=link href=http://localhost:4111/ target=_blank rel=noopener>http://localhost:4111/</a> ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</p><p>å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒWorkflowsã€ã‚’é¸ã³ã€ä»Šå›ä½œæˆã—ãŸ <code>clone-prompt-generator-workflow-with-eval</code> ã‚’é¸æŠã—ã¾ã™ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/Trae_xCr7Im1oMY.webp width=1920 height=1032 srcset="/p/build-llm-workflow-with-mastra/Trae_xCr7Im1oMY_hu_cb87b9a8b1a11d3f.webp 480w, /p/build-llm-workflow-with-mastra/Trae_xCr7Im1oMY_hu_7e30e7d904eb448f.webp 1024w" loading=lazy alt=ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é¸æŠç”»é¢ class=gallery-image data-flex-grow=186 data-flex-basis=446px></p><p>å³å´ã®ã€ŒRunã€ã¨ã„ã†ã‚¿ãƒ–ã« <code>OriginalText</code> ã¨ã„ã†å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚ã“ã“ã«ã€ã‚ãªãŸãŒãŠæ‰‹æœ¬ã«ã—ãŸã„æ–‡ç« ï¼ˆä¾‹ãˆã°ã€éå»ã«æ›¸ã„ãŸãƒ–ãƒ­ã‚°è¨˜äº‹ã®ä¸€éƒ¨ãªã©ï¼‰ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚</p><p><img src=/p/build-llm-workflow-with-mastra/Trae_bRgLzPZ7ea.webp width=1920 height=1032 srcset="/p/build-llm-workflow-with-mastra/Trae_bRgLzPZ7ea_hu_8f82ae0720adb291.webp 480w, /p/build-llm-workflow-with-mastra/Trae_bRgLzPZ7ea_hu_79a54b40e6c919b0.webp 1024w" loading=lazy alt=ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œç”»é¢ class=gallery-image data-flex-grow=186 data-flex-basis=446px></p><p>æ–‡ç« ã‚’è²¼ã‚Šä»˜ã‘ãŸã‚‰ã€ã€ŒSubmitã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼</p><p>ã‚ã¨ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆã¾ãŸã¯VS Codeãªã©ã®OUTPUTãƒ‘ãƒãƒ«ï¼‰ã«æµã‚Œã‚‹ãƒ­ã‚°ã‚’è¦‹å®ˆã‚Šã¾ã—ã‚‡ã†ã€‚ãƒ«ãƒ¼ãƒ—ãŒå›ã‚‹ãŸã³ã«ã€è©•ä¾¡ã‚¹ã‚³ã‚¢ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p><h3 id=ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰</h3><p>å®Ÿéš›ã«å‹•ä½œã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p><code>src/mastra/workflows/clonePromptGeneratorWorkflow.ts</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span><span class=lnt>252
</span><span class=lnt>253
</span><span class=lnt>254
</span><span class=lnt>255
</span><span class=lnt>256
</span><span class=lnt>257
</span><span class=lnt>258
</span><span class=lnt>259
</span><span class=lnt>260
</span><span class=lnt>261
</span><span class=lnt>262
</span><span class=lnt>263
</span><span class=lnt>264
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>xai</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@ai-sdk/xai&#39;</span><span class=p>;</span> <span class=c1>// or use gemini, openai, etc.
</span></span></span><span class=line><span class=cl><span class=c1>// import { gemini } from &#39;@ai-sdk/google&#39;; // Geminiã‚’ä½¿ã†å ´åˆã®ä¾‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>Agent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/agent&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Step</span><span class=p>,</span> <span class=nx>Workflow</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/workflows&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>z</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;zod&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=kr>type</span> <span class=nx>LanguageModel</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/llm&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>MastraAgentJudge</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/evals/judge&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Metric</span><span class=p>,</span> <span class=kr>type</span> <span class=nx>MetricResult</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@mastra/core/eval&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// --- è¨­å®š ---
</span></span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ã™ã‚‹LLMãƒ¢ãƒ‡ãƒ« (å¿…è¦ã«å¿œã˜ã¦å¤‰æ›´)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>llm</span> <span class=o>=</span> <span class=nx>xai</span><span class=p>(</span><span class=s1>&#39;grok-2-latest&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// const llm = gemini(&#39;gemini-2.5-pro-exp-03-25&#39;); // Gemini 2.5 Pro Experimentalã‚’ä½¿ã†å ´åˆã®ä¾‹
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// åŒä¸€äººç‰©ã¨åˆ¤å®šã™ã‚‹é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ã®é–¾å€¤ (èª¿æ•´å¯èƒ½)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>SIMILARITY_THRESHOLD</span> <span class=o>=</span> <span class=mf>0.7</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆAIã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>feedbackForPromptCreator</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ãƒ«ãƒ¼ãƒ—ã®ã‚«ã‚¦ãƒ³ã‚¿
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>iteration</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// --- è©•ä¾¡é–¢é€£ã®å®šç¾© ---
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * è©•ä¾¡AIã«æ¸¡ã™ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>generateSimilarityPrompt</span> <span class=o>=</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>originalText</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>generatedText</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>originalText</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>generatedText</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>})</span> <span class=o>=&gt;</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>ã‚ãªãŸã¯ã€æ–‡ç« ã®æ›¸ãæ–¹ã‚’æ¯”è¼ƒåˆ†æã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>ä¸ãˆã‚‰ã‚ŒãŸã€ŒãŠæ‰‹æœ¬ã®æ–‡ç« ã€ã¨ã€ŒAIãŒç”Ÿæˆã—ãŸæ–‡ç« ã€ã‚’æ¯”è¼ƒã—ã€ä¸¡è€…ãŒ**åŒã˜äººç‰©ã«ã‚ˆã£ã¦æ›¸ã‹ã‚ŒãŸã‚ˆã†ã«è¦‹ãˆã‚‹ã‹**ã©ã†ã‹ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>**è©•ä¾¡åŸºæº–:**
</span></span></span><span class=line><span class=cl><span class=sb>ä»¥ä¸‹ã®è¦ç´ ã«ç€ç›®ã—ã€ç·åˆçš„ãªæ›¸ãæ–¹ã®é¡ä¼¼åº¦ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>*   **æ–‡ä½“:** ä¸€äººç§°ã€å£èª¿ï¼ˆä¸å¯§èªã€ã‚¿ãƒ¡å£ãªã©ï¼‰ã€èªå°¾ï¼ˆã€œã§ã™ã€ã€œã ã€ã€œã‚ˆã­ç­‰ï¼‰
</span></span></span><span class=line><span class=cl><span class=sb>*   **å˜èªé¸ã³:** å¥½ã‚“ã§ä½¿ã†å˜èªã€è¨€ã„å›ã—ã€å°‚é–€ç”¨èªã®ä½¿ç”¨é »åº¦
</span></span></span><span class=line><span class=cl><span class=sb>*   **æ–‡ç« æ§‹æˆ:** æ–‡ã®é•·ã•ã€æ®µè½ã®ä½¿ã„æ–¹ã€æ¥ç¶šè©ã®ä½¿ã„æ–¹ã€è«–ç†å±•é–‹
</span></span></span><span class=line><span class=cl><span class=sb>*   **ãƒªã‚ºãƒ ãƒ»ãƒ†ãƒ³ãƒ:** å¥èª­ç‚¹ã®ä½¿ã„æ–¹ã€ä½“è¨€æ­¢ã‚ã®é »åº¦
</span></span></span><span class=line><span class=cl><span class=sb>*   **æ„Ÿæƒ…è¡¨ç¾:** ãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒã‚¬ãƒ†ã‚£ãƒ–ã€æ„Ÿæƒ…ã®è¡¨ã—æ–¹ã€ãƒ¦ãƒ¼ãƒ¢ã‚¢ã®æœ‰ç„¡
</span></span></span><span class=line><span class=cl><span class=sb>*   **ç™–:** ç‰¹å¾´çš„ãªè¨€ã„å›ã—ã€èª¤å­—è„±å­—ã®å‚¾å‘ï¼ˆã‚‚ã—ã‚ã‚Œã°ï¼‰
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>**é‡è¦:** ãƒˆãƒ”ãƒƒã‚¯ã‚„å†…å®¹ã®æ­£ã—ã•ã§ã¯ãªãã€ã‚ãã¾ã§**æ›¸ãæ–¹**ã®é¡ä¼¼æ€§ã®ã¿ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>**å‡ºåŠ›å½¢å¼:**
</span></span></span><span class=line><span class=cl><span class=sb>ä»¥ä¸‹ã®JSONå½¢å¼ã§ã€è©•ä¾¡çµæœã‚’è¿”ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>*   \`similarityScore\`: æ›¸ãæ–¹ã®é¡ä¼¼åº¦ã‚’ 0.0 (å…¨ãä¼¼ã¦ã„ãªã„) ã‹ã‚‰ 1.0 (å®Œå…¨ã«åŒã˜äººç‰©ã«è¦‹ãˆã‚‹) ã®é–“ã®**æ•°å€¤**ã§è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>*   \`reason\`: ãªãœãã®ã‚¹ã‚³ã‚¢ã«ãªã£ãŸã®ã‹ã€å…·ä½“çš„ãªç†ç”±ã‚’ç°¡æ½”ã«èª¬æ˜ã—ã¦ãã ã•ã„ã€‚ç‰¹ã«ã‚¹ã‚³ã‚¢ãŒä½ã„å ´åˆã¯ã€ã©ã®ç‚¹ãŒç•°ãªã‚‹ã¨æ„Ÿã˜ãŸã‹ã‚’æŒ‡æ‘˜ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>\`\`\`json
</span></span></span><span class=line><span class=cl><span class=sb>{
</span></span></span><span class=line><span class=cl><span class=sb>  &#34;similarityScore&#34;: number (0.0 ~ 1.0),
</span></span></span><span class=line><span class=cl><span class=sb>  &#34;reason&#34;: string
</span></span></span><span class=line><span class=cl><span class=sb>}
</span></span></span><span class=line><span class=cl><span class=sb>\`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>---
</span></span></span><span class=line><span class=cl><span class=sb>**ãŠæ‰‹æœ¬ã®æ–‡ç« :**
</span></span></span><span class=line><span class=cl><span class=sb>\`\`\`
</span></span></span><span class=line><span class=cl><span class=sb></span><span class=si>${</span><span class=nx>originalText</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>\`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>---
</span></span></span><span class=line><span class=cl><span class=sb>**AIãŒç”Ÿæˆã—ãŸæ–‡ç« :**
</span></span></span><span class=line><span class=cl><span class=sb>\`\`\`
</span></span></span><span class=line><span class=cl><span class=sb></span><span class=si>${</span><span class=nx>generatedText</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>\`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>---
</span></span></span><span class=line><span class=cl><span class=sb>ä¸Šè¨˜ã®å½¢å¼ã«å¾“ã£ã¦ã€è©•ä¾¡çµæœã‚’JSONã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * è©•ä¾¡çµæœã®å‹å®šç¾© (zodã‚¹ã‚­ãƒ¼ãƒ)
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SimilarityEvaluationSchema</span> <span class=o>=</span> <span class=nx>z</span><span class=p>.</span><span class=kt>object</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>similarityScore</span>: <span class=kt>z.number</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mi>0</span><span class=p>).</span><span class=nx>max</span><span class=p>(</span><span class=mi>1</span><span class=p>).</span><span class=nx>describe</span><span class=p>(</span><span class=s2>&#34;æ›¸ãæ–¹ã®é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢ (0.0ã‹ã‚‰1.0)&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>reason</span>: <span class=kt>z.string</span><span class=p>().</span><span class=nx>describe</span><span class=p>(</span><span class=s2>&#34;è©•ä¾¡ã®ç†ç”±&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>SimilarityEvaluation</span> <span class=o>=</span> <span class=nx>z</span><span class=p>.</span><span class=k>infer</span><span class=p>&lt;</span><span class=nt>typeof</span> <span class=na>SimilarityEvaluationSchema</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * è©•ä¾¡è€… (Judge) ã‚¯ãƒ©ã‚¹
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>AuthorshipSimilarityJudge</span> <span class=kr>extends</span> <span class=nx>MastraAgentJudge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=nx>model</span>: <span class=kt>LanguageModel</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;Authorship Similarity Judge&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;ã‚ãªãŸã¯æ–‡ç« ã®æ›¸ãæ–¹ã‚’æ¯”è¼ƒåˆ†æã™ã‚‹å°‚é–€å®¶ã§ã™ã€‚ä¸ãˆã‚‰ã‚ŒãŸæŒ‡ç¤ºã«å¾“ã£ã¦ã€äºŒã¤ã®æ–‡ç« ã®é¡ä¼¼åº¦ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>model</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>evaluate</span><span class=p>(</span><span class=nx>originalText</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>generatedText</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>SimilarityEvaluation</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>prompt</span> <span class=o>=</span> <span class=nx>generateSimilarityPrompt</span><span class=p>({</span> <span class=nx>originalText</span><span class=p>,</span> <span class=nx>generatedText</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=c1>// JSONãƒ¢ãƒ¼ãƒ‰ã‚„ã‚¹ã‚­ãƒ¼ãƒå¼·åˆ¶ãŒãƒ¢ãƒ‡ãƒ«ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚Œã°æ´»ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=k>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>agent</span><span class=p>.</span><span class=nx>generate</span><span class=p>(</span><span class=nx>prompt</span><span class=p>,</span> <span class=p>{</span> <span class=nx>output</span>: <span class=kt>SimilarityEvaluationSchema</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>result</span><span class=p>.</span><span class=kt>object</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s2>&#34;è©•ä¾¡çµæœã®ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ç”Ÿãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚&#34;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: JSONãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—ã—ãŸå ´åˆã€ã‚¹ã‚³ã‚¢0ã¨ã—ã¦æ‰±ã†ãªã©
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>fallbackResult</span> <span class=o>=</span> <span class=k>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>agent</span><span class=p>.</span><span class=nx>generate</span><span class=p>(</span><span class=nx>prompt</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span> <span class=nx>similarityScore</span>: <span class=kt>0.0</span><span class=p>,</span> <span class=nx>reason</span><span class=o>:</span> <span class=sb>`è©•ä¾¡AIã®å‡ºåŠ›å½¢å¼ãŒä¸æ­£ã§ã—ãŸ: </span><span class=si>${</span><span class=nx>fallbackResult</span><span class=p>.</span><span class=nx>text</span><span class=si>}</span><span class=sb>`</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * è©•ä¾¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹ (Metric) ã‚¯ãƒ©ã‚¹
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>AuthorshipSimilarityMetricResult</span> <span class=kr>extends</span> <span class=nx>MetricResult</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>info</span>: <span class=kt>SimilarityEvaluation</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>AuthorshipSimilarityMetric</span> <span class=kr>extends</span> <span class=nx>Metric</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>private</span> <span class=nx>judge</span>: <span class=kt>AuthorshipSimilarityJudge</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>constructor</span><span class=p>(</span><span class=nx>model</span>: <span class=kt>LanguageModel</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>judge</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AuthorshipSimilarityJudge</span><span class=p>(</span><span class=nx>model</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>measure</span><span class=p>(</span><span class=nx>originalText</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>generatedText</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=nx>Promise</span><span class=p>&lt;</span><span class=nt>AuthorshipSimilarityMetricResult</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>evaluationResult</span> <span class=o>=</span> <span class=k>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>judge</span><span class=p>.</span><span class=nx>evaluate</span><span class=p>(</span><span class=nx>originalText</span><span class=p>,</span> <span class=nx>generatedText</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>score</span>: <span class=kt>evaluationResult.similarityScore</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>info</span>: <span class=kt>evaluationResult</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// --- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®šç¾© ---
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>clonePromptGeneratorWorkflow</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Workflow</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;clone-prompt-generator-workflow-with-eval&#34;</span><span class=p>,</span> <span class=c1>// ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>triggerSchema</span>: <span class=kt>z.object</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>originalText</span>: <span class=kt>z.string</span><span class=p>().</span><span class=nx>describe</span><span class=p>(</span><span class=s2>&#34;The original text written by the user to be cloned.&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// --- ã‚¹ãƒ†ãƒƒãƒ—1: ãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç”Ÿæˆ ---
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>generateClonePromptStep</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Step</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s2>&#34;generate-clone-prompt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>execute</span>: <span class=kt>async</span> <span class=p>({</span> <span class=nx>context</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>promptCreatorAgent</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Agent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Prompt Creator Agent&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>instructions</span><span class=o>:</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>            # æŒ‡ç¤º: æœ€é«˜ã®ã€Œãªã‚Šãã‚Šæ–‡ç« ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚’ä½œæˆã—ã¦ãã ã•ã„
</span></span></span><span class=line><span class=cl><span class=sb>            ã‚ãªãŸã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢AIã§ã™ã€‚ã‚ãªãŸã®ä»»å‹™ã¯ã€ä¸ãˆã‚‰ã‚ŒãŸ**ã€ä¾‹æ–‡ã€‘**ã‚’åˆ†æã—ã€ãã®æ›¸ãæ‰‹ã®**ç‰¹å¾´ï¼ˆäººæ ¼ã€æ–‡ä½“ã€ç™–ï¼‰**ã‚’æ­£ç¢ºã«æ‰ãˆã€ãã®æ›¸ãæ‰‹ã«ãªã‚Šãã£ã¦**äººé–“ã‚‰ã—ãè‡ªç„¶ãªæ–‡ç« **ã‚’ç”Ÿæˆã•ã›ã‚‹ãŸã‚ã®**ã€Œæ±ç”¨çš„ãªæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€**ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã™ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>            (ä¸­ç•¥... ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¡ä»¶ã‚„æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã¯å¤‰æ›´ãªã—)
</span></span></span><span class=line><span class=cl><span class=sb>            **ã•ã‚ã€ä¸Šè¨˜ã™ã¹ã¦ã‚’è¸ã¾ãˆã€æœ€é«˜ã®ã€Œãªã‚Šãã‚Šæ–‡ç« ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚**
</span></span></span><span class=line><span class=cl><span class=sb>            </span><span class=si>${</span><span class=nx>feedbackForPromptCreator</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>            `</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>model</span>: <span class=kt>llm</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>originalText</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>triggerData</span><span class=p>.</span><span class=nx>originalText</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;[generate-clone-prompt] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã‚’é–‹å§‹ã—ã¾ã™ã€‚&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>promptCreatorAgent</span><span class=p>.</span><span class=nx>generate</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>        ã€ä¾‹æ–‡ã€‘:
</span></span></span><span class=line><span class=cl><span class=sb>        </span><span class=si>${</span><span class=nx>originalText</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>        `</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;[generate-clone-prompt] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`</span><span class=si>${</span><span class=nx>result</span><span class=p>.</span><span class=nx>text</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// --- æœ€çµ‚ã‚¹ãƒ†ãƒƒãƒ—: æˆåŠŸã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å‡ºåŠ› ---
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>outputFinalPromptStep</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Step</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=s2>&#34;output-final-prompt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>execute</span>: <span class=kt>async</span> <span class=p>({</span> <span class=nx>context</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>finalPrompt</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>getStepResult</span><span class=p>(</span><span class=nx>generateClonePromptStep</span><span class=p>)</span> <span class=kr>as</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;--------------------------------------------------&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Œäº†ã—ã¾ã—ãŸï¼&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;æˆåŠŸã—ãŸãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;--------------------------------------------------&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>finalPrompt</span><span class=p>);</span> <span class=c1>// æœ€çµ‚çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;--------------------------------------------------&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>finalPrompt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// --- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®çµ„ã¿ç«‹ã¦ ---
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>clonePromptGeneratorWorkflow</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>step</span><span class=p>(</span><span class=nx>generateClonePromptStep</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>until</span><span class=p>(</span><span class=kr>async</span> <span class=p>({</span> <span class=nx>context</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=c1>// iteration ã‚’å—ã‘å–ã‚‹
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>iteration</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=err>\</span><span class=sb>n--- ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb> é–‹å§‹ ---`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 1. ç”Ÿæˆã•ã‚ŒãŸã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚’å–å¾—
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>generatedClonePrompt</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>getStepResult</span><span class=p>(</span><span class=nx>generateClonePromptStep</span><span class=p>)</span> <span class=kr>as</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>originalText</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>triggerData</span><span class=p>.</span><span class=nx>originalText</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 2. originalTextã®ãƒ†ãƒ¼ãƒã‚’æŠ½è±¡åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>themeAbstractorAgent</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Agent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Theme Abstractor Agent&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>instructions</span><span class=o>:</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>            ä¸ãˆã‚‰ã‚ŒãŸæ–‡ç« ã®ä¸»è¦ãªãƒ†ãƒ¼ãƒã‚„ãƒˆãƒ”ãƒƒã‚¯ã‚’åˆ†æã—ã€**å…·ä½“çš„ãªå›ºæœ‰åè©ã€è£½å“åã€æŠ€è¡“åã€ã‚µãƒ¼ãƒ“ã‚¹åãªã©ã‚’é¿ã‘**ã€ã‚ˆã‚Šä¸€èˆ¬çš„ã§æŠ½è±¡çš„ãªè¨€è‘‰ã§è¡¨ç¾ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>            å‡ºåŠ›ã¯ã€ãã®æŠ½è±¡åŒ–ã•ã‚ŒãŸãƒ†ãƒ¼ãƒã®èª¬æ˜æ–‡ã®ã¿ã¨ã—ã€ä»–ã®è§£èª¬ã‚„å‰ç½®ãã¯å«ã‚ãªã„ã§ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>            ä¾‹: (çœç•¥...)
</span></span></span><span class=line><span class=cl><span class=sb>          `</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>model</span>: <span class=kt>llm</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] originalTextã‹ã‚‰ãƒ†ãƒ¼ãƒã‚’æŠ½è±¡åŒ–ä¸­...`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>abstractionResult</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>themeAbstractorAgent</span><span class=p>.</span><span class=nx>generate</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>        ä»¥ä¸‹ã®æ–‡ç« ã®ãƒ†ãƒ¼ãƒã‚’æŠ½è±¡åŒ–ã—ã¦ãã ã•ã„:</span><span class=err>\</span><span class=sb>n---</span><span class=err>\</span><span class=sb>n</span><span class=si>${</span><span class=nx>originalText</span><span class=si>}</span><span class=err>\</span><span class=sb>n---
</span></span></span><span class=line><span class=cl><span class=sb>        `</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>abstractedTheme</span> <span class=o>=</span> <span class=nx>abstractionResult</span><span class=p>.</span><span class=nx>text</span><span class=p>.</span><span class=nx>trim</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] æŠ½è±¡åŒ–ã•ã‚ŒãŸãƒ†ãƒ¼ãƒ: </span><span class=si>${</span><span class=nx>abstractedTheme</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 3. æŠ½è±¡åŒ–ã•ã‚ŒãŸãƒ†ãƒ¼ãƒã§ã€ãªã‚Šãã‚Šæ–‡ç« ã‚’ç”Ÿæˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>textGeneratorAgent</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Agent</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Text Generator Agent&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>instructions</span>: <span class=kt>generatedClonePrompt</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>model</span>: <span class=kt>llm</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] æŠ½è±¡åŒ–ã•ã‚ŒãŸãƒ†ãƒ¼ãƒã§æ–‡ç« ã‚’ç”Ÿæˆä¸­...`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>generatedTextResult</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>textGeneratorAgent</span><span class=p>.</span><span class=nx>generate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=sb>`ã€Œ</span><span class=si>${</span><span class=nx>abstractedTheme</span><span class=si>}</span><span class=sb>ã€ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãè§£èª¬ã™ã‚‹æ–‡ç« ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚`</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>generatedText</span> <span class=o>=</span> <span class=nx>generatedTextResult</span><span class=p>.</span><span class=nx>text</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 4. é¡ä¼¼åº¦ã‚’è©•ä¾¡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] ç”Ÿæˆã•ã‚ŒãŸæ–‡ç« ã¨ãŠæ‰‹æœ¬ã®æ–‡ç« ã®é¡ä¼¼åº¦ã‚’è©•ä¾¡ä¸­...`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>authorshipMetric</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AuthorshipSimilarityMetric</span><span class=p>(</span><span class=nx>llm</span><span class=p>);</span> <span class=c1>// è©•ä¾¡ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>metricResult</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>authorshipMetric</span><span class=p>.</span><span class=nx>measure</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>originalText</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>generatedText</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>currentScore</span> <span class=o>=</span> <span class=nx>metricResult</span><span class=p>.</span><span class=nx>score</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>reason</span> <span class=o>=</span> <span class=nx>metricResult</span><span class=p>.</span><span class=nx>info</span><span class=p>.</span><span class=nx>reason</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] è©•ä¾¡çµæœ - ã‚¹ã‚³ã‚¢: </span><span class=si>${</span><span class=nx>currentScore</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>, ç†ç”±: </span><span class=si>${</span><span class=nx>reason</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 5. è©•ä¾¡ã‚¹ã‚³ã‚¢ã«åŸºã¥ã„ã¦ãƒ«ãƒ¼ãƒ—ç¶™ç¶š/çµ‚äº†ã‚’åˆ¤æ–­
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>shouldStop</span> <span class=o>=</span> <span class=nx>currentScore</span> <span class=o>&gt;=</span> <span class=nx>SIMILARITY_THRESHOLD</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>shouldStop</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>feedbackForPromptCreator</span> <span class=o>=</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>          ---
</span></span></span><span class=line><span class=cl><span class=sb>          **å‰å›ã®è©¦è¡Œã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ (ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>):**
</span></span></span><span class=line><span class=cl><span class=sb>          ç”Ÿæˆã—ãŸã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚’ä½¿ã£ã¦ã€Œ</span><span class=si>${</span><span class=nx>abstractedTheme</span><span class=si>}</span><span class=sb>ã€ã«ã¤ã„ã¦æ›¸ã‹ã›ãŸçµæœã€ãŠæ‰‹æœ¬ã®æ–‡ç« ã¨ã®é¡ä¼¼åº¦ãŒç›®æ¨™ã«é”ã—ã¾ã›ã‚“ã§ã—ãŸ (ã‚¹ã‚³ã‚¢: </span><span class=si>${</span><span class=nx>currentScore</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>)ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>          è©•ä¾¡AIã¯ä»¥ä¸‹ã®ç‚¹ã‚’æŒ‡æ‘˜ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’å‚è€ƒã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ”¹å–„ã—ã¦ãã ã•ã„ã€‚
</span></span></span><span class=line><span class=cl><span class=sb>          **å¤±æ•—ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:**
</span></span></span><span class=line><span class=cl><span class=sb>          \`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>          </span><span class=si>${</span><span class=nx>generatedClonePrompt</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>          \`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>          **è©•ä¾¡AIã«ã‚ˆã‚‹æŒ‡æ‘˜:**
</span></span></span><span class=line><span class=cl><span class=sb>          \`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>          </span><span class=si>${</span><span class=nx>reason</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>          \`\`\`
</span></span></span><span class=line><span class=cl><span class=sb>          ---
</span></span></span><span class=line><span class=cl><span class=sb>            `</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] ã‚¹ã‚³ã‚¢ãŒé–¾å€¤æœªæº€ã®ãŸã‚ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ä½œæˆã—å†è©¦è¡Œã—ã¾ã™ã€‚`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb>] ã‚¹ã‚³ã‚¢ãŒé–¾å€¤ (</span><span class=si>${</span><span class=nx>SIMILARITY_THRESHOLD</span><span class=si>}</span><span class=sb>) ä»¥ä¸Šã®ãŸã‚ã€ãƒ«ãƒ¼ãƒ—ã‚’çµ‚äº†ã—ã¾ã™ã€‚`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>feedbackForPromptCreator</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span><span class=p>;</span> <span class=c1>// æˆåŠŸã—ãŸã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚¯ãƒªã‚¢
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`--- ãƒ«ãƒ¼ãƒ— </span><span class=si>${</span><span class=nx>iteration</span><span class=si>}</span><span class=sb> çµ‚äº† ---`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>shouldStop</span><span class=p>;</span> <span class=c1>// trueãªã‚‰ãƒ«ãƒ¼ãƒ—çµ‚äº†ã€falseãªã‚‰ç¶™ç¶š
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=nx>generateClonePromptStep</span><span class=p>)</span> <span class=c1>// ãƒ«ãƒ¼ãƒ—ã§å›ã™ã‚¹ãƒ†ãƒƒãƒ—ã‚’æŒ‡å®š
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>outputFinalPromptStep</span><span class=p>)</span> <span class=c1>// ãƒ«ãƒ¼ãƒ—çµ‚äº†å¾Œã«å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã‚’æŒ‡å®š
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>.</span><span class=nx>commit</span><span class=p>();</span> <span class=c1>// ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®šç¾©ã‚’ç¢ºå®š
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=p>{</span> <span class=nx>clonePromptGeneratorWorkflow</span> <span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å®Œæˆãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãã®æ´»ç”¨æ³•>å®Œæˆï¼ã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã¨ãã®æ´»ç”¨æ³•</h3><p><strong>æœ€çµ‚çš„ãªå‡ºåŠ›</strong></p><p>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒç„¡äº‹ã«é–¾å€¤ä»¥ä¸Šã®ã‚¹ã‚³ã‚¢ã‚’é”æˆã—ã¦çµ‚äº†ã™ã‚‹ã¨ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€æœ€çµ‚çš„ã«å®Œæˆã—ãŸã€Œãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>--------------------------------------------------
</span></span><span class=line><span class=cl>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Œäº†ã—ã¾ã—ãŸï¼
</span></span><span class=line><span class=cl>æœ€çµ‚çš„ãªé¡ä¼¼åº¦ã‚¹ã‚³ã‚¢: 0.75 (ä¾‹)
</span></span><span class=line><span class=cl>æˆåŠŸã—ãŸãªã‚Šãã‚ŠæŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:
</span></span><span class=line><span class=cl>--------------------------------------------------
</span></span><span class=line><span class=cl># æŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ã‚ãªãŸã¯ã€ä»¥ä¸‹ã«ç¤ºã™ç‰¹å¾´ã‚’æŒã¤äººç‰©ã«ãªã‚Šãã£ã¦ã€ã€è¨˜äº‹ã®å†…å®¹ã€‘ã‹ã‚‰äººé–“ã‚‰ã—ãè‡ªç„¶ãªæ–‡ç« ã‚’ç”Ÿæˆã™ã‚‹AIã§ã™ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>## ãªã‚Šãã‚‹äººç‰©ã®ç‰¹å¾´:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### äººæ ¼:
</span></span><span class=line><span class=cl>*   åŸºæœ¬å§¿å‹¢: ä¸å¯§ã§è¦ªã—ã¿ã‚„ã™ã„ã€‚åŠ¹ç‡çš„ã«æƒ…å ±ã‚’ä¼ãˆã‚ˆã†ã¨åŠªã‚ã‚‹ã€‚
</span></span><span class=line><span class=cl>*   è©±ã—æ–¹: æŸ”ã‚‰ã‹ã„ç‰©è…°ã€‚ã€Œã€œãªæ„Ÿã˜ã§ã™ã€ã®ã‚ˆã†ãªè¡¨ç¾ã‚‚ä½¿ã†ãŒã€æ‰‹é †èª¬æ˜ã¯ãƒ†ã‚­ãƒ‘ã‚­ã€‚
</span></span><span class=line><span class=cl>*   æ€è€ƒ: è«–ç†çš„ã ãŒæŸ”è»Ÿã€‚å®Ÿè·µçš„ã€‚
</span></span><span class=line><span class=cl>... (ä»¥ä¸‹ã€AIãŒç”Ÿæˆã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒç¶šã) ...
</span></span><span class=line><span class=cl>--------------------------------------------------
</span></span></code></pre></td></tr></table></div></div><p>ã“ã®å‡ºåŠ›ã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ä»Šå¾Œã®æ–‡ç« ç”Ÿæˆï¼ˆä¾‹ãˆã°ChatGPTã‚„Claudeãªã©ä»–ã®ãƒ„ãƒ¼ãƒ«ã§ä½¿ã†å ´åˆã‚‚ï¼‰ã«æ´»ç”¨ã™ã‚Œã°ã€ã‚ãªãŸã®æ–‡ä½“ã‚’æ¨¡å€£ã—ãŸä¸‹æ›¸ãã‚’AIã«ä½œã£ã¦ã‚‚ã‚‰ã†ã“ã¨ãŒã§ãã‚‹ã¯ãšã§ã™ï¼</p><h3 id=ã¾ã¨ã‚>ã¾ã¨ã‚</h3><p>ä»Šå›ã¯mastraã®ãƒ«ãƒ¼ãƒ—æ©Ÿèƒ½ã¨è©•ä¾¡æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€AIã«è‡ªåˆ†ã®æ–‡ç« ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å­¦ç¿’ã•ã›ã€ãã‚Œã«ãªã‚Šãã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè‡ªä½“ã‚’è‡ªå‹•ç”Ÿæˆãƒ»æ”¹å–„ã•ã›ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚</p><p>AIã«AIã®ä½¿ã„æ–¹ã‚’è€ƒãˆã•ã›ã‚‹ã¨ã„ã†ã€å°‘ã—ãƒ¡ã‚¿çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã—ãŸãŒã€ã†ã¾ãã„ã‘ã°æ–‡ç« ä½œæˆã®åŠ¹ç‡åŒ–ã«ç¹‹ãŒã‚Šãã†ã§ã™ã‚ˆã­ã€‚ç‰¹ã«ã€ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚„ãƒ¬ãƒãƒ¼ãƒˆãªã©ã€ã‚ã‚‹ç¨‹åº¦è‡ªåˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§æ›¸ããŸã„ã‘ã©ã€ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãŒå¤§å¤‰â€¦ã¨æ„Ÿã˜ã¦ã„ã‚‹æ–¹ã«ã¯è©¦ã—ã¦ã¿ã‚‹ä¾¡å€¤ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p><p>mastraã€ãªã‹ãªã‹å¥¥ãŒæ·±ãã¦é¢ç™½ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ï¼çš†ã•ã‚“ã‚‚ãœã²ã€è‰²ã€…ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œã‚Šã«æŒ‘æˆ¦ã—ã¦ã¿ã¦ãã ã•ã„ã­ã€‚</p></section><footer class=article-footer><section class=article-tags><a href=/tags/mastra/>Mastra</a>
<a href=/tags/typescript/>TypeScript</a>
<a href=/tags/grok/>Grok</a>
<a href=/tags/gemini/>Gemini</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>é–¢é€£ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/free-ai-models-create-threejs-game/><div class=article-image><img src=/p/free-ai-models-create-threejs-game/free-ai-models-create-threejs-game.e58640b9f9c13966bf9452e6e067ce58_hu_2de51dcfcd3d618.webp width=250 height=150 loading=lazy alt="Featured image of post æœ€æ–°ç„¡æ–™AIãƒ¢ãƒ‡ãƒ« Gemini 2.5 Pro ã¨ Trae Builder ã‚’ä½¿ã£ã¦Three.jsã‚²ãƒ¼ãƒ é–‹ç™ºã«æŒ‘æˆ¦ï¼" data-key=free-ai-models-create-threejs-game data-hash="md5-5YZAufnBOWa/lFLm4GfOWA=="></div><div class=article-details><h2 class=article-title>æœ€æ–°ç„¡æ–™AIãƒ¢ãƒ‡ãƒ« Gemini 2.5 Pro ã¨ Trae Builder ã‚’ä½¿ã£ã¦Three.jsã‚²ãƒ¼ãƒ é–‹ç™ºã«æŒ‘æˆ¦ï¼</h2></div></a></article><article class=has-image><a href=/p/registering-xai-grok-api-and-using-it-with-vscode-extensions-cody-cline-roo-code/><div class=article-image><img src=/p/registering-xai-grok-api-and-using-it-with-vscode-extensions-cody-cline-roo-code/xai_payment.73082bdeae438bad3640804a6a26137b_hu_d6b0f5dfbe541e27.webp width=250 height=150 loading=lazy alt="Featured image of post xAIï¼ˆGrok APIï¼‰ã®ç™»éŒ²ã¨VSCodeæ‹¡å¼µæ©Ÿèƒ½ï¼ˆCodyã€Clineã€Roo Codeï¼‰ã§ã®ä½¿ã„æ–¹" data-key=registering-xai-grok-api-and-using-it-with-vscode-extensions-cody-cline-roo-code data-hash="md5-cwgr3q5Di602QIBKaiYTew=="></div><div class=article-details><h2 class=article-title>xAIï¼ˆGrok APIï¼‰ã®ç™»éŒ²ã¨VSCodeæ‹¡å¼µæ©Ÿèƒ½ï¼ˆCodyã€Clineã€Roo Codeï¼‰ã§ã®ä½¿ã„æ–¹</h2></div></a></article><article class=has-image><a href=/p/rovo-dev-cli-guide-wsl2-blender/><div class=article-image><img src=/p/rovo-dev-cli-guide-wsl2-blender/rovo-dev-cli-guide-wsl2-blender.53c9331e345d1bef53c80de3491be75f_hu_8a9726256bf4bc98.webp width=250 height=150 loading=lazy alt="Featured image of post Rovo Dev CLIå®Ÿè·µã‚¬ã‚¤ãƒ‰ï¼šVSCodeã¨WSL2ã§å¿«é©ã«ä½¿ã†æ–¹æ³•" data-key=rovo-dev-cli-guide-wsl2-blender data-hash="md5-U8kzHjRdG+9TyA3jSRvnXw=="></div><div class=article-details><h2 class=article-title>Rovo Dev CLIå®Ÿè·µã‚¬ã‚¤ãƒ‰ï¼šVSCodeã¨WSL2ã§å¿«é©ã«ä½¿ã†æ–¹æ³•</h2></div></a></article><article class=has-image><a href=/p/roblox-ts-template-for-modern-development/><div class=article-image><img src=/p/roblox-ts-template-for-modern-development/roblox-ts-template-for-modern-development.7af396fd154e0b9d345e3a313784cbbd_hu_f03d539097d9cc41.webp width=250 height=150 loading=lazy alt="Featured image of post Robloxï¼ˆTypeScriptï¼‰ã¨VSCodeã§ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºç’°å¢ƒã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ" data-key=roblox-ts-template-for-modern-development data-hash="md5-evOW/RVOC500XjoxN4TLvQ=="></div><div class=article-details><h2 class=article-title>Robloxï¼ˆTypeScriptï¼‰ã¨VSCodeã§ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºç’°å¢ƒã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2></div></a></article><article class=has-image><a href=/p/roblox-luau-template-for-modern-development/><div class=article-image><img src=/p/roblox-luau-template-for-modern-development/roblox-luau-template-for-modern-development.7af396fd154e0b9d345e3a313784cbbd_hu_f03d539097d9cc41.webp width=250 height=150 loading=lazy alt="Featured image of post Robloxï¼ˆLuauï¼‰ã¨VSCodeã§ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºç’°å¢ƒã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ" data-key=roblox-luau-template-for-modern-development data-hash="md5-evOW/RVOC500XjoxN4TLvQ=="></div><div class=article-details><h2 class=article-title>Robloxï¼ˆLuauï¼‰ã¨VSCodeã§ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºç’°å¢ƒã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2></div></a></article></div></div></aside><link rel=stylesheet href=/scss/partials/comments/disqusjs.min.css><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>let disqusjs;function loadDisqusJS(){disqusjs=new DisqusJS({shortname:"takoyakisoft",siteName:"TakoyakiSoft",apikey:"eL3QpmMQaI2omMQ6bzIOJQaX35h7aYJz4zB1kn3puW2xAkjuN7N5rx2kq0WNeOrC",api:"https://disqus.skk.moe/disqus/",admin:"takoyakisoft",adminLabel:"takoyaki"})}function lazyLoadDisqusJS(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/disqusjs@1.3/dist/disqus.js",e.async=!1,document.body.appendChild(e),e.onload=()=>{loadDisqusJS(),window.addEventListener("onColorSchemeChange",e=>{disqusjs&&loadDisqusJS()})}}let runningOnBrowser=typeof window!="undefined",isBot=runningOnBrowser&&!("onscroll"in window)||typeof navigator!="undefined"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),supportsIntersectionObserver=runningOnBrowser&&"IntersectionObserver"in window;if(!isBot&&supportsIntersectionObserver){let e=new IntersectionObserver(function(t){t[0].isIntersecting&&(lazyLoadDisqusJS(),e.disconnect())});e.observe(document.getElementById("disqus_thread"))}else lazyLoadDisqusJS()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><footer class=site-footer><section class=copyright>&copy;
2024 -
2025 TakoyakiSoft</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> ã§æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ãƒ†ãƒ¼ãƒ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ã¯ <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> ã«ã‚ˆã£ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>